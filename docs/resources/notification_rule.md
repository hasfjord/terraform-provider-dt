---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "dt_notification_rule Resource - dt"
subcategory: ""
description: |-
  
---

# dt_notification_rule (Resource)



## Example Usage

```terraform
# Copyright (c) HashiCorp, Inc.

resource "dt_project" "my_project" {
  display_name = "Notification Rule Acceptance Test Project"
  organization = "organizations/cvinmt9aq9sc738g6eog"
  location = {
    time_location = "Europe/Oslo"
  }
}

resource "dt_notification_rule" "my_notification_rule" {
  display_name = "Terraform created notification rule"
  project_id   = dt_project.my_project.id
  trigger = {
    field = "temperature"
    range = {
      lower = 0
      upper = 30
    }
  }
  escalation_levels = [
    {
      display_name = "Escalation Level 1"
      actions = [
        {
          type = "EMAIL"
          email_config = {
            body = "Temperature $celsiusÂ°C is out of range"
            recipients = [
              "someone@example.com"
            ]
            subject = "Temperature Alert"
          }
        }
      ]
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `display_name` (String) he display name of the rule that is visible in Studio.
- `project_id` (String) The DT project ID of the rule.
- `trigger` (Attributes) The condition that that needs to be met before the actions are executed. (see [below for nested schema](#nestedatt--trigger))

### Optional

- `actions` (Attributes List, Deprecated) The list of actions that will be executed when the trigger is met. (see [below for nested schema](#nestedatt--actions))
- `device_labels` (Map of String) An optional map of labels to use as a filter for which devices this rule applies to.
								This applies regardless of whether or not the devices field is set. The map can contain
								both label key/value pairs, or just label keys. If multiple labels are specified, the
								device must match all of them to be included.
- `devices` (List of String) An optional list of device resource names that this rule applies to.
								If the list is empty, the rule applies to all devices in the project,
								or those matching all the labels in device_labels (if present).
- `enabled` (Boolean) Whether or not the rule is enabled.
- `escalation_levels` (Attributes List) A list of escalation levels that will be used throughout the lifecycle of alerts
    							that are created by this rule. The first escalation level will be used when the
    							alert is triggered, and the next escalation level will be used when the alert is
    							escalated, and so on. Each escalation level needs at least one action, and there
    							needs to be at least one escalation level. (see [below for nested schema](#nestedatt--escalation_levels))
- `reminder_notification` (Boolean) Whether or not to send a reminder notifications
- `resolved_notification` (Boolean) Whether or not to send a resolved notifications
- `schedule` (Attributes) A schedule limits at what times the rule will be evaluated, and events will be processed. 
								When an event is received outside the schedule, the device will never be put on the delay
								queue, and a trigger counter (if enabled) will not be incremented. (see [below for nested schema](#nestedatt--schedule))
- `trigger_delay` (String) The amount of time to wait before executing the actions. This is useful to avoid
    							sending notifications for short-lived conditions, or when a notification is only desired
    							if a condition has been met for an extended period of time (eg. fridge temp above a certain
    							value for 1h, or a door open for 30 minutes). If this is not set, the actions will be
    							executed immediately.
- `unacknowledge_after` (String) The amount of time before an acknowledged alert created by this rule is unacknowledged.
								When an alert is unacknowledged, the notifications for its current escalation level
								will be sent out once again, and the escalation timer will start. The default value
								is 4 hours.

### Read-Only

- `name` (String) The resource name of the rule. The resource name has the following format: "projects/{project_id}/rules/{rule_id}". 
							 	The name is ignored when creating a new rule.

<a id="nestedatt--trigger"></a>
### Nested Schema for `trigger`

Required:

- `field` (String) The data field to use for the criteria.

Optional:

- `connection` (String) The connection status of a device can be set to either `CLOUD_CONNECTOR_OFFLINE`for cloud connector offline or `SENSOR_OFFLINE` for sensor offline. Default is `CLOUD_CONNECTOR_OFFLINE`
- `contact` (String) The open status of a contact(door and window) sensor. Must be one of `OPEN` or `CLOSED`. Default is OPEN
- `motion` (String) The motion detected by a sensor. Must be one of `MOTION_DETECTED` or `NO_MOTION_DETECTED`. Default is MOTION_DETECTED
- `occupancy` (String) Occupancy detected by a sensor. Must be one of `OCCUPIED` or `NOT_OCCUPIED`. Default is OCCUPIED
- `presence` (String) The presence of a object or person detected by a sensor. Must be one of `PRESENT` or `ABSENT`. Default is PRESENT
- `range` (Attributes) The range of values that the data field has to be within or without for the criteria to be met. (see [below for nested schema](#nestedatt--trigger--range))
- `trigger_count` (Number) The number of times a device has to meet the trigger criteria (enter triggering mode) 
											before a notification is published. The value has to be greater than 1 for this feature
											to be "enabled". A value of 0 or 1 is considered equivalent.
											Note that this feature can't be used with trigger delay, reminder notifications or 
											resolved notifications.

<a id="nestedatt--trigger--range"></a>
### Nested Schema for `trigger.range`

Optional:

- `filter` (Attributes) An optional filter when applied the rule will only trigger if the filtered temperature is within the specified range. (see [below for nested schema](#nestedatt--trigger--range--filter))
- `lower` (Number) The minimum value of the range.
- `type` (String) The type of range to use. Must be one of `WITHIN` or `OUTSIDE`. Default is `WITHIN`.
- `upper` (Number) The maximum value of the range.

<a id="nestedatt--trigger--range--filter"></a>
### Nested Schema for `trigger.range.filter`

Optional:

- `product_equivalent_temperature` (Attributes) An empty object, as the ProductEquivalentTemperature filter does not have any attributes. (see [below for nested schema](#nestedatt--trigger--range--filter--product_equivalent_temperature))

<a id="nestedatt--trigger--range--filter--product_equivalent_temperature"></a>
### Nested Schema for `trigger.range.filter.product_equivalent_temperature`





<a id="nestedatt--actions"></a>
### Nested Schema for `actions`

Required:

- `type` (String) The type of notification action. Must be one of SMS,EMAIL,CORRIGO,SERVICE_CHANNEL,WEBHOOK,PHONE_CALL,SIGNAL_TOWER, default is EMAIL

Optional:

- `corrigo_config` (Attributes) The configuration for creating a Corrigo work order. (see [below for nested schema](#nestedatt--actions--corrigo_config))
- `email_config` (Attributes) The configuration for sending an email notification. (see [below for nested schema](#nestedatt--actions--email_config))
- `phone_call_config` (Attributes) The configuration for sending a phone call notification. (see [below for nested schema](#nestedatt--actions--phone_call_config))
- `service_channel_config` (Attributes) The configuration for sending a notification to a service channel. (see [below for nested schema](#nestedatt--actions--service_channel_config))
- `signal_tower_config` (Attributes) The configuration for sending a signal tower notification. (see [below for nested schema](#nestedatt--actions--signal_tower_config))
- `sms_config` (Attributes) The configuration for sending an SMS notification. (see [below for nested schema](#nestedatt--actions--sms_config))
- `webhook_config` (Attributes) The configuration for sending a webhook notification. (see [below for nested schema](#nestedatt--actions--webhook_config))

<a id="nestedatt--actions--corrigo_config"></a>
### Nested Schema for `actions.corrigo_config`

Required:

- `asset_id` (String) The asset ID of the device.
- `client_id` (String) The client ID of the device.
- `client_secret` (String, Sensitive) The client secret of the device.
- `company_name` (String) The company name of the device.
- `contact_address` (String) The contact address of the device.
- `contact_name` (String) The contact name of the device.
- `customer_id` (String) The customer ID of the device.
- `sub_type_id` (String) The sub type ID of the device.
- `task_id` (String) The task ID of the device.

Optional:

- `studio_dashboard_url` (String) Optional field to allow users to set the Studio dashboard link that
    								should be included in the Corrigo Work Order. If this is not specified,
    								the defaultx (initial) dashboard will be used in the link.
- `work_order_description` (String) Optional field that will populate the description of the work order. 
    								If this is not specified, a default value will be used.


<a id="nestedatt--actions--email_config"></a>
### Nested Schema for `actions.email_config`

Required:

- `body` (String) The body of the email.
- `recipients` (List of String) The email addresses to send the email to.
- `subject` (String) The subject of the email.


<a id="nestedatt--actions--phone_call_config"></a>
### Nested Schema for `actions.phone_call_config`

Required:

- `introduction` (String) Used to introduce the call to the callee.
    								Example: "This is an automated call from Disruptive Technologies.
- `message` (String) The message that should be read to the callee.
    								Example: "The temperature in the fridge is above the threshold, currently at $celsius.
- `recipients` (List of String) A list of the phone numbers to call. Must be in E.164 format.


<a id="nestedatt--actions--service_channel_config"></a>
### Nested Schema for `actions.service_channel_config`

Optional:

- `asset_tag_id` (String) tag that is set on the asset in ServiceChannel. Will be used to find the 
									asset, and link it to work orders. 
									When specified, the trade of the asset will be used for the work order instead 
									of the provided asset. If this is not set, or if an asset couldn't be found 
									based on this tag, the provided trade will be used instead to derive fields 
									dependent on the trade. If this is not set, it will be derived from the 
									"service_channel_asset_tag_id" label in Studio.
- `description` (String) The description that will appear on the work order. If this is not set, 
									it will be derived from the "service_channel_work_order_description"
									label in Studio.
- `store_id` (String) A 4-digit number that identifies the store the asset is in.
    								If this is not set, it will be derived from the "service_channel_store_id"
    								label in Studio.
- `trade` (String) The trade to use if the asset tag id is either not specified or no matching
									asset could be found. If this is not set, it will be derived from the 
									"service_channel_trade" label in Studio.
									Examples of a trade could be "REFRIGERATION" or "HOT FOOD".


<a id="nestedatt--actions--signal_tower_config"></a>
### Nested Schema for `actions.signal_tower_config`

Required:

- `cloud_connector_name` (String) The resource name of the Cloud Connector that has the signal tower
									connected to it. We currently only support one signal tower per
									Cloud Connector.


<a id="nestedatt--actions--sms_config"></a>
### Nested Schema for `actions.sms_config`

Required:

- `body` (String) The message to send in the SMS.
- `recipients` (List of String) The phone numbers to send the SMS to.


<a id="nestedatt--actions--webhook_config"></a>
### Nested Schema for `actions.webhook_config`

Required:

- `url` (String) Valid URL using HTTPS.

Optional:

- `headers` (Map of String) The headers to include in the webhook request.
- `signature_secret` (String, Sensitive) Use a custom secret to sign the data.



<a id="nestedatt--escalation_levels"></a>
### Nested Schema for `escalation_levels`

Required:

- `actions` (Attributes List) The list of actions that will be executed once this escalation level is reached. (see [below for nested schema](#nestedatt--escalation_levels--actions))
- `display_name` (String) he display namse of the escalation level that is visible in Studio.

Optional:

- `escalate_after` (String) The amount of time to wait before escalating to the next escalation level. Only
    										relevant if there are more escalation levels that follows this one.

<a id="nestedatt--escalation_levels--actions"></a>
### Nested Schema for `escalation_levels.actions`

Required:

- `type` (String) The type of notification action. Must be one of SMS,EMAIL,CORRIGO,SERVICE_CHANNEL,WEBHOOK,PHONE_CALL,SIGNAL_TOWER, default is EMAIL

Optional:

- `corrigo_config` (Attributes) The configuration for creating a Corrigo work order. (see [below for nested schema](#nestedatt--escalation_levels--actions--corrigo_config))
- `email_config` (Attributes) The configuration for sending an email notification. (see [below for nested schema](#nestedatt--escalation_levels--actions--email_config))
- `phone_call_config` (Attributes) The configuration for sending a phone call notification. (see [below for nested schema](#nestedatt--escalation_levels--actions--phone_call_config))
- `service_channel_config` (Attributes) The configuration for sending a notification to a service channel. (see [below for nested schema](#nestedatt--escalation_levels--actions--service_channel_config))
- `signal_tower_config` (Attributes) The configuration for sending a signal tower notification. (see [below for nested schema](#nestedatt--escalation_levels--actions--signal_tower_config))
- `sms_config` (Attributes) The configuration for sending an SMS notification. (see [below for nested schema](#nestedatt--escalation_levels--actions--sms_config))
- `webhook_config` (Attributes) The configuration for sending a webhook notification. (see [below for nested schema](#nestedatt--escalation_levels--actions--webhook_config))

<a id="nestedatt--escalation_levels--actions--corrigo_config"></a>
### Nested Schema for `escalation_levels.actions.corrigo_config`

Required:

- `asset_id` (String) The asset ID of the device.
- `client_id` (String) The client ID of the device.
- `client_secret` (String, Sensitive) The client secret of the device.
- `company_name` (String) The company name of the device.
- `contact_address` (String) The contact address of the device.
- `contact_name` (String) The contact name of the device.
- `customer_id` (String) The customer ID of the device.
- `sub_type_id` (String) The sub type ID of the device.
- `task_id` (String) The task ID of the device.

Optional:

- `studio_dashboard_url` (String) Optional field to allow users to set the Studio dashboard link that
    								should be included in the Corrigo Work Order. If this is not specified,
    								the defaultx (initial) dashboard will be used in the link.
- `work_order_description` (String) Optional field that will populate the description of the work order. 
    								If this is not specified, a default value will be used.


<a id="nestedatt--escalation_levels--actions--email_config"></a>
### Nested Schema for `escalation_levels.actions.email_config`

Required:

- `body` (String) The body of the email.
- `recipients` (List of String) The email addresses to send the email to.
- `subject` (String) The subject of the email.


<a id="nestedatt--escalation_levels--actions--phone_call_config"></a>
### Nested Schema for `escalation_levels.actions.phone_call_config`

Required:

- `introduction` (String) Used to introduce the call to the callee.
    								Example: "This is an automated call from Disruptive Technologies.
- `message` (String) The message that should be read to the callee.
    								Example: "The temperature in the fridge is above the threshold, currently at $celsius.
- `recipients` (List of String) A list of the phone numbers to call. Must be in E.164 format.


<a id="nestedatt--escalation_levels--actions--service_channel_config"></a>
### Nested Schema for `escalation_levels.actions.service_channel_config`

Optional:

- `asset_tag_id` (String) tag that is set on the asset in ServiceChannel. Will be used to find the 
									asset, and link it to work orders. 
									When specified, the trade of the asset will be used for the work order instead 
									of the provided asset. If this is not set, or if an asset couldn't be found 
									based on this tag, the provided trade will be used instead to derive fields 
									dependent on the trade. If this is not set, it will be derived from the 
									"service_channel_asset_tag_id" label in Studio.
- `description` (String) The description that will appear on the work order. If this is not set, 
									it will be derived from the "service_channel_work_order_description"
									label in Studio.
- `store_id` (String) A 4-digit number that identifies the store the asset is in.
    								If this is not set, it will be derived from the "service_channel_store_id"
    								label in Studio.
- `trade` (String) The trade to use if the asset tag id is either not specified or no matching
									asset could be found. If this is not set, it will be derived from the 
									"service_channel_trade" label in Studio.
									Examples of a trade could be "REFRIGERATION" or "HOT FOOD".


<a id="nestedatt--escalation_levels--actions--signal_tower_config"></a>
### Nested Schema for `escalation_levels.actions.signal_tower_config`

Required:

- `cloud_connector_name` (String) The resource name of the Cloud Connector that has the signal tower
									connected to it. We currently only support one signal tower per
									Cloud Connector.


<a id="nestedatt--escalation_levels--actions--sms_config"></a>
### Nested Schema for `escalation_levels.actions.sms_config`

Required:

- `body` (String) The message to send in the SMS.
- `recipients` (List of String) The phone numbers to send the SMS to.


<a id="nestedatt--escalation_levels--actions--webhook_config"></a>
### Nested Schema for `escalation_levels.actions.webhook_config`

Required:

- `url` (String) Valid URL using HTTPS.

Optional:

- `headers` (Map of String) The headers to include in the webhook request.
- `signature_secret` (String, Sensitive) Use a custom secret to sign the data.




<a id="nestedatt--schedule"></a>
### Nested Schema for `schedule`

Required:

- `timezone` (String) The timezone for which the schedule applies. This will automatically handle DST if the correct zones are used.
										E.g. "Europe/Oslo", "America/Los_Angeles", "UTC"
										See https://en.wikipedia.org/wiki/List_of_tz_database_time_zones

Optional:

- `inverse` (Boolean) true, the schedule will be active when the event time is outside all specified slots.
- `slots` (Attributes List) Slots of time where the rule should be active or inactive. (see [below for nested schema](#nestedatt--schedule--slots))

<a id="nestedatt--schedule--slots"></a>
### Nested Schema for `schedule.slots`

Required:

- `day_of_week` (List of String) Day of week for the slot. Must be one of Monday,Tuesday,Wednesday,Thursday,Friday,Saturday,Sunday, empty means every day

Optional:

- `time_range` (Attributes List) Ranges of time where the rule should be active or inactive. (see [below for nested schema](#nestedatt--schedule--slots--time_range))

<a id="nestedatt--schedule--slots--time_range"></a>
### Nested Schema for `schedule.slots.time_range`

Required:

- `end` (Attributes) The end time of the slot in HH:MM format. (see [below for nested schema](#nestedatt--schedule--slots--time_range--end))
- `start` (Attributes) The start time of the slot. (see [below for nested schema](#nestedatt--schedule--slots--time_range--start))

<a id="nestedatt--schedule--slots--time_range--end"></a>
### Nested Schema for `schedule.slots.time_range.end`

Required:

- `hour` (Number) The hour of the slot.
- `minute` (Number) The minute of the slot.


<a id="nestedatt--schedule--slots--time_range--start"></a>
### Nested Schema for `schedule.slots.time_range.start`

Required:

- `hour` (Number) The hour of the slot.
- `minute` (Number) The minute of the slot.
